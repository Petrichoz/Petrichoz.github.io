

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="https://p0.itc.cn/q_70/images03/20230516/bab1646e504942d4a9d964cde5d8b15d.jpeg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="pz">
  <meta name="keywords" content="">
  
    <meta name="description" content="第05章_指针指针是 C 语言最重要的概念之一，也是最难理解的概念之一。 指针是C语言的精髓，要想掌握C语言就需要深入地了解指针。 指针类型在考研中用得最多的地方，就是和结构体结合起来构造结点(如链表的结点、二叉树的结点等)。 本章专题脉络   1int num &#x3D; 5;  )   通过地址能找到所需的变量单元，可以说，地址指向该变量单元，将地址形象化地称为“指针”。即：  变量：命名的内存空间，">
<meta property="og:type" content="article">
<meta property="og:title" content="5、指针">
<meta property="og:url" content="http://example.com/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/index.html">
<meta property="og:site_name" content="PZ">
<meta property="og:description" content="第05章_指针指针是 C 语言最重要的概念之一，也是最难理解的概念之一。 指针是C语言的精髓，要想掌握C语言就需要深入地了解指针。 指针类型在考研中用得最多的地方，就是和结构体结合起来构造结点(如链表的结点、二叉树的结点等)。 本章专题脉络   1int num &#x3D; 5;  )   通过地址能找到所需的变量单元，可以说，地址指向该变量单元，将地址形象化地称为“指针”。即：  变量：命名的内存空间，">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/c.png">
<meta property="article:published_time" content="2024-04-28T08:35:21.000Z">
<meta property="article:modified_time" content="2025-01-29T16:18:57.112Z">
<meta property="article:author" content="pz">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/c.png">
  
  
  
  <title>5、指针 - PZ</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":false},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>PZ</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="5、指针"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-04-28 16:35" pubdate>
          2024年4月28日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          42 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">5、指针</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="第05章-指针"><a href="#第05章-指针" class="headerlink" title="第05章_指针"></a>第05章_指针</h1><p>指针是 C 语言<code>最重要</code>的概念之一，也是最<code>难理解</code>的概念之一。</p>
<p>指针是C语言的<code>精髓</code>，要想掌握C语言就需要深入地了解指针。</p>
<p>指针类型在考研中用得最多的地方，就是和结构体结合起来<code>构造结点</code>(如链表的结点、二叉树的结点等)。</p>
<h2 id="本章专题脉络"><a href="#本章专题脉络" class="headerlink" title="本章专题脉络"></a>本章专题脉络</h2><img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/第5章_指针.png" srcset="/img/loading.gif" lazyload style="zoom: 50%;">
<!--

<img src="第05章_指针(重点)\第5章_指针.png" srcset="/img/loading.gif" lazyload style="zoom: 50%;" />

<p>–&gt;</p>
<h2 id="1、指针的理解与定义"><a href="#1、指针的理解与定义" class="headerlink" title="1、指针的理解与定义"></a>1、指针的理解与定义</h2><h3 id="1-1-变量的访问方式"><a href="#1-1-变量的访问方式" class="headerlink" title="1.1 变量的访问方式"></a>1.1 变量的访问方式</h3><p>计算机中程序的运行都是在内存中进行的，变量也是在内存中分配的空间，且不同类型的变量占用不同大小的空间。那如何访问内存中变量存储的数据呢？有两种方式：<code>直接访问</code>和<code>间接访问</code>。直接访问，直接使用变量名进行的访问，以前的程序中都是采用这种方式。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> num1 = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> num2 = <span class="hljs-number">20</span>;<br><span class="hljs-type">int</span> num3 = num1 + num2;<br></code></pre></td></tr></table></figure>

<p>间接访问，通过指针来实现。下面看如何理解指针。</p>
<h3 id="1-2-内存地址与指针"><a href="#1-2-内存地址与指针" class="headerlink" title="1.2 内存地址与指针"></a>1.2 内存地址与指针</h3><p>为了能够有效的访问到内存的每个单元(即一个字节)，就给内存单元进行了编号，这些编号被称为该<strong>内存单元的地址</strong>。因为每个内存单元都有地址，所以变量存储的数据也是有地址的。</p>
<p><img src="/image-20230809113257075.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230809113257075.png](第05章_指针(重点)\image-20230809113257075.png)

-->

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> num = <span class="hljs-number">5</span>;<br></code></pre></td></tr></table></figure>

<p><img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230808160923041.png" srcset="/img/loading.gif" lazyload>)</p>
<!--

![image-20230808160923041](第05章_指针(重点)\image-20230808160923041.png)
-->

<p>通过地址能找到所需的变量单元，可以说，<strong>地址指向该变量单元</strong>，将<strong>地址形象化地称为“指针”</strong>。即：</p>
<ul>
<li><p><code>变量</code>：命名的内存空间，用于存放各种类型的数据。</p>
</li>
<li><p><code>变量名</code>：变量名是给内存空间取的一个容易记忆的名字。</p>
</li>
<li><p><code>变量值</code>：在变量单元中存放的数据值。</p>
</li>
<li><p><code>变量的地址</code>：变量所使用的内存空间的地址，即<code>指针</code>。</p>
</li>
</ul>
<p><img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230808155204785.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230808155204785.png](第05章_指针(重点)\image-20230808155204785.png)

-->

<ul>
<li><code>指针变量</code>：一个变量专门用来存放另一变量在内存中数据的地址 (即指针)，则它称为“指针变量”。我们可以通过访问指针变量达到访问内存中另一个变量数据的目的。(有时为了阐述方便，将指针变量直接说成指针。)</li>
</ul>
<p><img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230808160942652.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230808160942652.png](第05章_指针(重点)\image-20230808160942652.png)

-->

<p>上图中，地址0x00000001是变量 i 的指针，i_pointer就是一个指针变量。</p>
<blockquote>
<p>体会：指针就是内存地址，使用指针访问变量，就是直接对内存地址中的数据进行操作。</p>
</blockquote>
<h3 id="1-3-指针变量的定义"><a href="#1-3-指针变量的定义" class="headerlink" title="1.3 指针变量的定义"></a>1.3 指针变量的定义</h3><p><strong>一般格式：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">数据类型 *指针变量名 [=初始地址值];<br></code></pre></td></tr></table></figure>

<ul>
<li><p>数据类型是指针变量所指向变量数据类型。可以是 int、char、float 等基本类型，也可以是数组等构造类型。</p>
</li>
<li><p>字符 <code>*</code> 用于告知系统这里定义的是一个指针变量，通常跟在类型关键字的后面。比如， char * 表示一个指向字符的指针， float * 表示一个指向 float 类型的值的指针。此外，还有指向数组的指针、指向结构体的指针。</p>
</li>
</ul>
<p><strong>举例1：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p;  <span class="hljs-comment">//读作：指向int的指针”或简称“int指针”</span><br></code></pre></td></tr></table></figure>

<p>这是一个指针变量，用于存储int型的整数在内存空间中数据的地址。</p>
<p>变形写法：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span>* p;<br><span class="hljs-type">int</span> * p;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<p>1、指针变量的名字是 p，不是*p。</p>
<p>2、指针变量中只能存放地址，不要将一个整数（或任何其它非地址类型的数据）赋给一个指针变量。</p>
</blockquote>
<p>举例2：同一行声明两个指针变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// 正确</span><br><span class="hljs-type">int</span> * a, * b;<br><span class="hljs-comment">// 错误</span><br><span class="hljs-type">int</span>* a, b;   <span class="hljs-comment">//此时a是整数指针变量，而b是整数变量</span><br></code></pre></td></tr></table></figure>

<p>举例3：一个指针指向的可能还是指针，这时就要用两个星号 ** 表示。(后面讲)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> **foo;<br></code></pre></td></tr></table></figure>

<h3 id="1-4-指针的应用场景"><a href="#1-4-指针的应用场景" class="headerlink" title="1.4 指针的应用场景"></a>1.4 指针的应用场景</h3><p>场景1：使用指针访问变量或数组的元素。</p>
<p>场景2：应用在数据结构中。比如：</p>
<p><img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230809115315139.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230809115315139.png](第05章_指针(重点)\image-20230809115315139.png)

-->

<h2 id="2、指针的运算"><a href="#2、指针的运算" class="headerlink" title="2、指针的运算"></a>2、指针的运算</h2><p>指针作为一种特殊的数据类型可以参与运算，但与其他数据类型不同的是，指针的运算都是针对内存中的地址来实现的。</p>
<h3 id="2-1-取址运算符："><a href="#2-1-取址运算符：" class="headerlink" title="2.1 取址运算符：&amp;"></a>2.1 取址运算符：&amp;</h3><p>取址运算符，使用“<code>&amp;</code>”符号来表示。作用：<code>取出指定变量在内存中的地址</code>，其语法格式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">&amp;变量<br></code></pre></td></tr></table></figure>

<p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> num = <span class="hljs-number">10</span>; <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;num = %d\n&quot;</span>, num); <span class="hljs-comment">// 输出变量的值。 num = 10</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&amp;num = %p\n&quot;</span>, &amp;num); <span class="hljs-comment">// 输出变量的内存地址。&amp;num = 00000050593ffbbc</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>说明：</p>
<p>1、在输出取址运算获得的地址时，需要使用“%p”作为格式输出符。</p>
<p>2、这里num的4个字节，每个字节都有地址，取出的是第一个字节的地址（较小的地址）。</p>
</blockquote>
<p>举例2：将变量的地址赋值给指针变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> num = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> *p; <span class="hljs-comment">//p为一个整型指针变量</span><br>p = &amp;num; <br></code></pre></td></tr></table></figure>

<p><img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230808161218566.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230808161218566.png](第05章_指针(重点)\image-20230808161218566.png)

-->

<p>举例3：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> d = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> *e, *f;<br>e = &amp;d;<br>f = e;<br></code></pre></td></tr></table></figure>

<p><strong>指针变量的赋值</strong></p>
<p>1、指针变量中只能存放地址（指针），不要将一个整数（或任何其它非地址类型的数据）赋给一个指针变量。</p>
<p>2、C语言中的地址包括位置信息(内存编号，或称纯地址)和它所指向的数据的类型信息，即它是“<code>带类型的地址</code>”。所以，一个指针变量只能指向同一个类型的变量，不能抛开类型随意赋值。</p>
<ul>
<li>char* 类型的指针是为了存放 char 类型变量的地址。</li>
<li>short* 类型的指针是为了存放 short 类型变量的地址。</li>
<li>int* 类型的指针是为了存放 int 类型变量的地址。</li>
</ul>
<p>3、在没有对指针变量赋值时，指针变量的值是不确定的，可能系统会分配一个未知的地址，此时使用此指针变量可能会导致不可预料的后果甚至是系统崩溃。为了避免这个问题，通常给指针变量赋初始值为0(或NULL)，并把值为0的指针变量称为<code>空指针变量</code>。</p>
<p>举例4：通过指针变量修改指向的内存中的数据</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">int</span> num = <span class="hljs-number">10</span>, *ptr;<br>    ptr = &amp;num;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,num);<br><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, ptr); <span class="hljs-comment">//等价于scanf(&quot;%d&quot;, &amp;num);</span><br>    <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,num);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230809114210755.png" srcset="/img/loading.gif" lazyload style="zoom: 67%;">
<!--

<img src="第05章_指针(重点)\image-20230809114210755.png" srcset="/img/loading.gif" lazyload style="zoom: 67%;" />

<p>–&gt;</p>
<h3 id="2-2-取值运算符："><a href="#2-2-取值运算符：" class="headerlink" title="2.2 取值运算符：*"></a>2.2 取值运算符：*</h3><p>在C语言中针对指针运算还提供了一个取值运算符，使用“<code>*</code>”符号表示。其<code>作用与&amp;相反</code>，根据一个给定的内存地址取出该地址对应变量的值。也称为<code>解引用符号</code>。其格式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">*指针表达式<br></code></pre></td></tr></table></figure>

<p>其中，“<code>*</code>”不同于定义指针变量的符号，这里是运算符。“指针表达式”用于得到一个内存地址，与“*”结合以获得该内存地址对应变量的值。</p>
<p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">int</span> a = <span class="hljs-number">2024</span>;<br>    <span class="hljs-type">int</span> *p;<br>    p = &amp;a;<br>    <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>,&amp;a); <span class="hljs-comment">//0000005cc43ff6d4</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>,p);  <span class="hljs-comment">//0000005cc43ff6d4</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, *p); <span class="hljs-comment">//2024</span><br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">int</span> num = <span class="hljs-number">10</span>; <span class="hljs-comment">//这里定义一个整型变量num</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;num = %d\n&quot;</span>, num); <span class="hljs-comment">//输出变量num的值。输出：num = 10</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&amp;num = %p\n&quot;</span>, &amp;num); <span class="hljs-comment">//输出变量num的地址。输出：&amp;num = 000000e6a11ffa1c</span><br>    <br>    <span class="hljs-type">int</span> *p = &amp;num;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>,p); <span class="hljs-comment">//000000e6a11ffa1c</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,*p);<span class="hljs-comment">//10</span><br>    <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;*&amp;num = %d\n&quot;</span>, *&amp;num);<span class="hljs-comment">//通过num地址读取num中的数据。输出：*&amp;num = 10</span><br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><code>&amp;</code> 运算符与 <code>*</code> 运算符互为逆运算，下面的表达式总是成立：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> i = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">if</span> (i == *(&amp;i)) <span class="hljs-comment">// 正确</span><br></code></pre></td></tr></table></figure>
</blockquote>
<p>举例3：通过指针变量修改指向内存地址位置上的值</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">int</span> num = <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> *p = &amp;num;<br>    *p = <span class="hljs-number">20</span>;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;num = %d\n&quot;</span>,num);  <span class="hljs-comment">//num = 20</span><br><br>    <span class="hljs-type">char</span> ch = <span class="hljs-string">&#x27;w&#x27;</span>;<br>    <span class="hljs-type">char</span>* pc = &amp;ch;<br>    *pc = <span class="hljs-string">&#x27;s&#x27;</span>;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ch = %c\n&quot;</span>, ch); <span class="hljs-comment">//ch = &#x27;s&#x27;</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="/image-20230808181707841.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230808181707841.png](第05章_指针(重点)\image-20230808181707841.png)

-->

<p>举例4：</p>
<p>定义指针变量 p1、p2，默认各自指向整数a、b，a、b从键盘输入。设计程序，使得 p1 指向其中的较大值，p2 指向其中的较小值 。</p>
<p><img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230831093326127.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230831093326127.png](第05章_指针(重点)\image-20230831093326127.png)

-->

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">int</span> *p1, *p2, *p, a, b;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入两个整数: &quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d,%d&quot;</span>, &amp;a, &amp;b);<br>    p1 = &amp;a;<br>    p2 = &amp;b;<br>    <span class="hljs-keyword">if</span> (a &lt; b) &#123;<br>        p = p1;<br>        p1 = p2;<br>        p2 = p;<br>    &#125;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;输出p1、p2: &quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d,%d\n&quot;</span>, *p1, *p2);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>举例5：已有代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> *p;<br>p = &amp;a;<br></code></pre></td></tr></table></figure>

<p>请看问题：</p>
<p>问题1：<code>&amp;*p</code>的含义是什么?</p>
<ul>
<li><code>“&amp;”</code>和<code>“*”</code>两个运算符的优先级别相同，但按自右而左方向运算。因此，<code>&amp;*p</code>与<code>&amp;a</code>相同，即变量a的地址。</li>
<li>如果有<code>p1 = &amp;*p; </code>它的作用是将<code>&amp;a</code> (a的地址)赋给<code>p1</code> ，如果<code>p1</code>原来指向 b，经过重新赋值后它已不再指向b了，而指向了a。</li>
</ul>
<p>问题2：<code>*&amp;a</code>的含义是什么?</p>
<ul>
<li>先进行<code>&amp;a</code>运算，得a的地址，再进行<code>*</code>运算。<code>*&amp;a</code>和<code>*p</code>的作用是一样的，它们都等价于变量a。即<code>*&amp;a</code>与 a 等价。</li>
</ul>
<h3 id="2-3-指针的常用运算"><a href="#2-3-指针的常用运算" class="headerlink" title="2.3 指针的常用运算"></a>2.3 指针的常用运算</h3><p>指针本质上就是一个无符号整数，代表了内存地址。除了上面提到的取址运算外，指针还可以与整数加减、自增自减、同类指针相减运算等。但是规则并不是整数运算的规则。</p>
<h4 id="2-3-1-指针与整数值的加减运算"><a href="#2-3-1-指针与整数值的加减运算" class="headerlink" title="2.3.1 指针与整数值的加减运算"></a>2.3.1 指针与整数值的加减运算</h4><p>格式：<code>指针±整数</code></p>
<p>指针与整数值的加减运算，表示指针所指向的内存地址的移动（加，向后移动；减，向前移动）。指针移动的单位，与指针指向的数据类型有关。<strong>数据类型占据多少个字节，每单位就移动多少个字节。</strong></p>
<p>通过此操作，可以快速定位你要的地址。 </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">short</span> *s;<br>s = (<span class="hljs-type">short</span> *) <span class="hljs-number">0x1234</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%hx\n&quot;</span>, s + <span class="hljs-number">1</span>); <span class="hljs-comment">//0x1236   复习：%hx ：十六进制 short int 类型</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%hx\n&quot;</span>, s - <span class="hljs-number">1</span>); <span class="hljs-comment">//0x1232</span><br><br><span class="hljs-type">int</span> *i;<br>i = (<span class="hljs-type">int</span> *) <span class="hljs-number">0x1234</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%x\n&quot;</span>, i + <span class="hljs-number">1</span>); <span class="hljs-comment">//0x1238    复习：%x ：十六进制整数</span><br></code></pre></td></tr></table></figure>

<p>说明：s + 1 表示指针向内存地址的高位移动一个单位，而一个单位的 short 类型占据两个字节的宽度，所以相当于向高位移动两个字节。</p>
<p>再比如：变量a、b、c、d和e都是整型数据int类型，它们在内存中占据一块连续的存储区域。指针变量p指向变量a，也就是p的值是0xFF12，则：</p>
<p><img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230808164019404.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230808164019404.png](第05章_指针(重点)\image-20230808164019404.png)

-->

<p>说明：指针p+1并不是地址+1，而是指针p指向数组中的下一个数据。比如，int *p，p+1表示当前地址+4，指向下一个整型数据。</p>
<p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>    <span class="hljs-type">int</span> *p = &amp;arr[<span class="hljs-number">1</span>];<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p的地址为：%p,对应的值为%d\n&quot;</span>, p, *p); <span class="hljs-comment">//p1的地址为：000000df21bff6e4,对应的值为2</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p+1=的地址为：%p,对应的值为%d\n&quot;</span>, p + <span class="hljs-number">1</span>, *(p + <span class="hljs-number">1</span>)); <span class="hljs-comment">//p1+1=的地址为：000000df21bff6e8,对应的值为3</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p-1=的地址为：%p,对应的值为%d\n&quot;</span>, p - <span class="hljs-number">1</span>, *(p - <span class="hljs-number">1</span>)); <span class="hljs-comment">//p1-1=的地址为：000000df21bff6e0,对应的值为1</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>注意：只有指向连续的同类型数据区域，指针加、减整数才有实际意义。</p>
</blockquote>
<p>举例2：</p>
<p>对于长度是 N 的一维数组 a，当使用指针 p 指向其首元素后，即可通过指针 p 访问数组的各个元素。</p>
<img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230808180239442.png" srcset="/img/loading.gif" lazyload style="zoom:80%;">
<!--

<img src="第05章_指针(重点)\image-20230808180239442.png" srcset="/img/loading.gif" lazyload style="zoom:80%;" />

<p>–&gt;</p>
<p>其中：</p>
<ul>
<li><p><code>a[0]</code>用 <code>*p</code> 表示</p>
</li>
<li><p><code>a[1]</code>用<code>*(p+1)</code>表示</p>
</li>
<li><p><code>a[i]</code>用<code>*(p+i)</code>表示</p>
</li>
</ul>
<p>遍历数组操作如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> LENGTH 5</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">int</span> arr[LENGTH] = &#123;<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>,<span class="hljs-number">50</span>&#125;;<br><br>    <span class="hljs-comment">//方式1：传统直接访问的方式</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; LENGTH;i++)&#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,arr[i]);<br>    &#125;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-comment">//方式2：使用指针访问</span><br>    <span class="hljs-type">int</span> *p = &amp;arr[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; LENGTH;i++)&#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,*(p+i));<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2-3-2-指针的自增、自减运算"><a href="#2-3-2-指针的自增、自减运算" class="headerlink" title="2.3.2 指针的自增、自减运算"></a>2.3.2 指针的自增、自减运算</h4><p>指针类型变量也可以进行自增或自减运算，如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">p++ 、 p-- 、 ++p 、--p<br></code></pre></td></tr></table></figure>

<p>++和–在运算符章节已经讲过，这里针对指针的增加或减少指的是内存地址的向前或向后移动。</p>
<p>针对于数组来说，由于数组在内存中是连续分布的。</p>
<ul>
<li>当对指针进行++时，指针会按照它指向的数据类型字节数大小增加，比如 int * 指针，每 ++ 一次， 就增加4个字节。</li>
<li>当对指针进行–时，指针会按照它指向的数据类型字节数大小减少，比如 int * 指针，每 – 一次， 就减少4个字节。</li>
</ul>
<p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>    <span class="hljs-type">int</span> *p1 = &amp;arr[<span class="hljs-number">0</span>];<br>    <span class="hljs-type">int</span> *p2 = &amp;arr[<span class="hljs-number">3</span>];<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p1的值为：%d\n&quot;</span>, *p1);        <span class="hljs-comment">//1</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;++p1的值为：%d\n&quot;</span>, *(++p1));  <span class="hljs-comment">//2</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p1的值为：%d\n&quot;</span>, *p1);        <span class="hljs-comment">//2</span><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p1的地址为：%p\n&quot;</span>, p1);      <span class="hljs-comment">//00000055c0bff704</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p1++的地址为：%p\n&quot;</span>, ++p1);  <span class="hljs-comment">//00000055c0bff708</span><br><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p2的值为：%d\n&quot;</span>, *p2);       <span class="hljs-comment">//4</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;--p2的值为：%d\n&quot;</span>, *(--p2)); <span class="hljs-comment">//3</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p2的值为：%d\n&quot;</span>, *p2);       <span class="hljs-comment">//3</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>举例2：请分析下面几种情况。</p>
<p>初始情况：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>,<span class="hljs-number">50</span>&#125;;<br></code></pre></td></tr></table></figure>

<p>情况1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p = a;  <span class="hljs-comment">//p开始时指向数组a的首元素    等同于 int *p = &amp;a[0];</span><br><br>p++; <span class="hljs-comment">//使p指向下一元素a[1]</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,*p); <span class="hljs-comment">//得到下一个元素a[1]的值，即20</span><br></code></pre></td></tr></table></figure>

<p>情况2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p = a;  <span class="hljs-comment">//p开始时指向数组a的首元素</span><br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,*p++); <span class="hljs-comment">//10   分析：由于++和*同优先级，结合方向自右而左，因此它等价于*(p++)</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,*p);   <span class="hljs-comment">//20</span><br></code></pre></td></tr></table></figure>

<p>拓展：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">*(p++); <span class="hljs-comment">//先取*p值，然后使p自增1</span><br>*(++p); <span class="hljs-comment">//先使p自增1，再取*p</span><br></code></pre></td></tr></table></figure>

<p>拓展：如果 p 当前指向 a 数组中第 i 个元素a[i]，则：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">*(p--) <span class="hljs-comment">//相当于a[i--]，先对p进行“*”运算，再使p自减</span><br>*(++p) <span class="hljs-comment">//相当于a[++i]，先使p自加，再进行“*”运算</span><br>*(--p) <span class="hljs-comment">//相当于a[--i]，先使p自减，再进行“*”运算</span><br></code></pre></td></tr></table></figure>

<p>情况3：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p = &amp;a[<span class="hljs-number">2</span>];  <span class="hljs-comment">//p开始时指向数组a的第3个元素</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,*(p--)); <span class="hljs-comment">//30</span><br>    <br>p = &amp;a[<span class="hljs-number">2</span>];<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,*(++p)); <span class="hljs-comment">//40</span><br><br>p = &amp;a[<span class="hljs-number">2</span>];<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,*(--p)); <span class="hljs-comment">//20</span><br></code></pre></td></tr></table></figure>

<p>情况3：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p = a;            <span class="hljs-comment">//p开始时指向数组a的首元素</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,++(*p)); <span class="hljs-comment">//11</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">分析：表示p所指向的元素值加1，如果p=a, 则相当于++a[0]，若a[0]的值为10，则a[0]的值为11。</span><br><span class="hljs-comment">注意: 是元素a[0]的值加1，而不是指针p的值加1</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>

<h4 id="2-3-3-同类指针相减运算"><a href="#2-3-3-同类指针相减运算" class="headerlink" title="2.3.3 同类指针相减运算"></a>2.3.3 同类指针相减运算</h4><p>格式：<code>指针 - 指针</code></p>
<p>相同类型的指针允许进行减法运算，返回它们之间的距离，即<code>相隔多少个数据单位（注意：非字节数）</code>。高位地址减去低位地址，返回的是正值；低位地址减去高位地址，返回的是负值。</p>
<p>返回的值属于 <code>ptrdiff_t</code> 类型，这是一个带符号的整数类型别名，具体类型根据系统不同而不同。这个类型的原型定义在头文件 stddef.h 里面。</p>
<p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">short</span> *ps1;<br>    <span class="hljs-type">short</span> *ps2;<br>    ps1 = (<span class="hljs-type">short</span> *) <span class="hljs-number">0x1234</span>;<br>    ps2 = (<span class="hljs-type">short</span> *) <span class="hljs-number">0x1236</span>;<br>    <span class="hljs-type">ptrdiff_t</span> dist = ps2 - ps1;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, dist); <span class="hljs-comment">// 1   相差2个字节正好存放1个 short 类型的值。</span><br><br>    <span class="hljs-type">int</span> *pi1;<br>    <span class="hljs-type">int</span> *pi2;<br><br>    pi1 = (<span class="hljs-type">int</span> *) <span class="hljs-number">0x1234</span>;<br>    pi2 = (<span class="hljs-type">int</span> *) <span class="hljs-number">0x1244</span>;<br><br>    <span class="hljs-type">ptrdiff_t</span> dist1 = pi2 - pi1;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,dist1);  <span class="hljs-comment">//4   相差16个字节正好存放4个 int 类型的值。</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>    <span class="hljs-type">int</span> *p1 = &amp;arr[<span class="hljs-number">0</span>];<br>    <span class="hljs-type">int</span> *p2 = &amp;arr[<span class="hljs-number">3</span>];<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p1的地址为：%d\n&quot;</span>, p1); <span class="hljs-comment">//497022544</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p2的地址为：%d\n&quot;</span>, p2); <span class="hljs-comment">//497022556</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p2-p1=%d\n&quot;</span>, p2 - p1); <span class="hljs-comment">//3 等同于 (497022556 - 497022544)/4 ==&gt; 3</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="image-20230808200939114.png" srcset="/img/loading.gif" lazyload style="zoom:80%;" />
<!--

<img src="第05章_指针(重点)\image-20230808200939114.png" srcset="/img/loading.gif" lazyload style="zoom:80%;" />

<p>–&gt;</p>
<blockquote>
<p>体会：两个指针相减，通常两个指针都是指向同一数组中的元素才有意义。结果是两个地址之差除以数组元素的长度。不相干的两个变量的地址，通常没有做减法的必要。</p>
</blockquote>
<p>举例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">int</span> i = <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> j = <span class="hljs-number">20</span>;<br>    <span class="hljs-type">int</span> *p1 = &amp;i;<br>    <span class="hljs-type">int</span> *p2 = &amp;j;<br><br>    <span class="hljs-type">ptrdiff_t</span> dist = p1 - p2;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,dist);   <span class="hljs-comment">//通常没有计算减法的必要</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>非法：同类指针相加运算</strong></p>
<p>两个指针进行加法是<code>非法的</code>，所得结果是没有意义的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> i = <span class="hljs-number">10</span>,j = <span class="hljs-number">20</span>;<br><span class="hljs-type">int</span> *p1 = &amp;i;<br><span class="hljs-type">int</span> *p2 = &amp;j;<br><span class="hljs-type">int</span> *p3 = p1 + p2; <span class="hljs-comment">//非法</span><br></code></pre></td></tr></table></figure>

<h4 id="2-3-4-指针间的比较运算"><a href="#2-3-4-指针间的比较运算" class="headerlink" title="2.3.4 指针间的比较运算"></a>2.3.4 指针间的比较运算</h4><p>指针之间的比较运算，比如 &#x3D;&#x3D;、!&#x3D; 、&lt;、 &lt;&#x3D; 、 &gt;、 &gt;&#x3D;。比较的是各自的内存地址的大小，返回值是整数 1 （true）或 0 （false）。</p>
<p>举例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-type">int</span> *p1 = &amp;arr[<span class="hljs-number">0</span>];<br><span class="hljs-type">int</span> *p2 = &amp;arr[<span class="hljs-number">3</span>];<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,p1 &gt; p2);  <span class="hljs-comment">//0</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,p1 &lt; p2);  <span class="hljs-comment">//1</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,p1 == p2); <span class="hljs-comment">//0</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,p1 != p2); <span class="hljs-comment">//1</span><br></code></pre></td></tr></table></figure>

<p>练习：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">int</span> arr[] = &#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>&#125;;<br>    <span class="hljs-type">int</span> *ptr;<br>    ptr = arr;  <span class="hljs-comment">//ptr指向arr首地址(第一个元素)</span><br>    <span class="hljs-keyword">if</span> (ptr == arr[<span class="hljs-number">0</span>]) &#123; <span class="hljs-comment">//错误,类型不一样</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ok1\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (ptr == &amp;arr[<span class="hljs-number">0</span>]) &#123; <span class="hljs-comment">// 可以</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ok2\n&quot;</span>); <span class="hljs-comment">//输出</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (ptr == arr) &#123; <span class="hljs-comment">//可以</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ok3\n&quot;</span>); <span class="hljs-comment">//输出</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (ptr &gt;= &amp;arr[<span class="hljs-number">1</span>]) &#123; <span class="hljs-comment">//可以比较,但是返回false</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ok4\n&quot;</span>);<span class="hljs-comment">//不会输出</span><br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (ptr &lt; &amp;arr[<span class="hljs-number">1</span>]) &#123; <span class="hljs-comment">//可以比较,返回true</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ok5\n&quot;</span>);<span class="hljs-comment">//输出</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<blockquote>
<p>【华南理工大学2018研】若有说明：int *p，m＝5，n；，以下正确的程序段是（　　）。<br>A．</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">p=&amp;n;  <br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,n); <br></code></pre></td></tr></table></figure>

<p>B．</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">p=&amp;n;  <br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,*p); <br></code></pre></td></tr></table></figure>

<p>C．</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);  <br>p=n <br></code></pre></td></tr></table></figure>

<p>D．</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">p=&amp;n;  <br>*p=n; <br></code></pre></td></tr></table></figure>

<p>【答案】D</p>
<p>【解析】scanf语句中第二个参数应该是变量的地址，AB错误；C中p为指针变量，不可以直接把一个int型变量赋值给指针型，C错误；答案选D。</p>
</blockquote>
<blockquote>
<p> 【华南理工大学2018研】若有定义：int *p，*s，c；，且各变量已正确赋值，则非法的赋值表达式是（　）。<br> A．p＝s<br> B．c＝*s<br> C．*s＝&amp;p<br> D．p＝&amp;c</p>
<p> 【答案】C</p>
<p> 【解析】C中p为指针变量，则&amp;p表示的是指针的地址，若要赋值，则左边变量应该是一个二级指针，而*s代表的是s所指向地址的变量值，这个变量是一个int型，显然不正确。</p>
</blockquote>
<blockquote>
<p>【中央财经大学2018研】有如下说明</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a[<span class="hljs-number">10</span>]=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>&#125;, *p=a;<br></code></pre></td></tr></table></figure>

<p>则数值为9的表达式是（　　）。<br>A．*p＋9<br>B．*(p＋8)<br>C．*p +&#x3D; 9<br>D．p＋8</p>
<p>【答案】B</p>
<p>【解析】A中*p＝1，*p＋9＝10，A错误。C中*p得到的是1，加9后结果是10，C错误。D中p是地址，p＋8仍然表示一个地址。因此B项正确，p＋8指向元素9，进行取值得9。</p>
</blockquote>
<h2 id="3、野指针"><a href="#3、野指针" class="headerlink" title="3、野指针"></a>3、野指针</h2><h3 id="3-1-什么是野指针"><a href="#3-1-什么是野指针" class="headerlink" title="3.1 什么是野指针"></a>3.1 什么是野指针</h3><p>野指针：就是指针指向的位置是不可知（<code>随机性</code>，<code>不正确</code>，<code>没有明确限制的</code>）。</p>
<h3 id="3-2-野指针的成因"><a href="#3-2-野指针的成因" class="headerlink" title="3.2 野指针的成因"></a>3.2 野指针的成因</h3><h4 id="①-指针使用前未初始化"><a href="#①-指针使用前未初始化" class="headerlink" title="① 指针使用前未初始化"></a>① 指针使用前未初始化</h4><p>指针变量在定义时如果未初始化，<code>其值是随机的</code>，此时操作指针就是去访问一个不确定的地址，所以结果是不可知的。此时p就为野指针。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> *p;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,*p);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>在没有给指针变量显式初始化的情况下，一系列的操作(包括修改指向内存的数据的值)也是错误的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>&#123;<br>	<span class="hljs-type">int</span>* p;                       <br>	*p = <span class="hljs-number">10</span>;  <br>	<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>拓展：注意如下的赋值操作也是错误的</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> num = <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> *p;<br>    p = num;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="②-指针越界访问"><a href="#②-指针越界访问" class="headerlink" title="② 指针越界访问"></a>② 指针越界访问</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> arr[<span class="hljs-number">10</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-type">int</span> *p = arr;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">10</span>; i++,p++) &#123;<br>        *p = i;                   <span class="hljs-comment">//i=10时越界</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="/image-20230808182041120.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230808182041120.png](第05章_指针(重点)\image-20230808182041120.png)

-->

<p>当i&#x3D;10时，此时<code>*p</code>访问的内存空间不在数组有效范围内，此时<code>*p</code>就属于非法访问内存空间，p为野指针。</p>
<h4 id="③-指针指向已释放的空间"><a href="#③-指针指向已释放的空间" class="headerlink" title="③ 指针指向已释放的空间"></a>③ 指针指向已释放的空间</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> *<span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">return</span> &amp;a;          <span class="hljs-comment">//&amp;a=0x0012ff40</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> *p = test();<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, *p);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>调用test函数将返回值赋给p，test函数的返回值是局部变量a的地址。由于a只在test函数内有效，出了test函数其内存空间就被释放，也就意味着<code>a的地址编号不存在</code>，若将其赋值给p，导致p获取到的地址是<code>无效</code>的。</p>
<p>如果短时间内再次利用这块地址，它的值还未被改变也就是0x0012ff40还存在，p的值为0x0012ff40，*p时还是10，可以打印出。</p>
<p>但如果在打印之前有其他函数调用了这块地址，这块地址的名称就会发生变化，不再是0x0012ff40，打印*p时不再为10。</p>
<p>总之，此时p为野指针。</p>
<h3 id="3-3-野指针的避免"><a href="#3-3-野指针的避免" class="headerlink" title="3.3 野指针的避免"></a>3.3 野指针的避免</h3><p><strong>1、指针初始化</strong></p>
<p>定义指针的时候，如果没有确切的地址赋值，为指针变量赋一个 NULL 值是好的编程习惯。即</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p = <span class="hljs-literal">NULL</span>;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>赋为 NULL 值的指针被称为<code>空指针</code>，NULL 指针是一个定义在标准库 &lt;stdio.h&gt;中的值为零的常量 <strong>#define NULL 0</strong></p>
</blockquote>
<p>后面如果用到指针的话再让指针指向具有实际意义的地址，然后通过指针的取值符号(*)改变其指向的内容。</p>
<p>练习：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> *p = <span class="hljs-literal">NULL</span>; <span class="hljs-comment">//空指针不要与未初始化的指针混淆</span><br><br>    <span class="hljs-type">int</span> b = <span class="hljs-number">8</span>;<br>    p = &amp;b;   <span class="hljs-comment">//显式赋值</span><br>    *p = <span class="hljs-number">100</span>;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, *p);  <span class="hljs-comment">//100</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\b&quot;</span>, b);   <span class="hljs-comment">//100</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>2、小心指针越界</strong></p>
<p><strong>3、避免返回局部变量的地址</strong></p>
<p><strong>4、指针指向空间释放，及时置NULL</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;			<br><span class="hljs-type">int</span>* pa = &amp;a;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, *pa);<br> <br>pa = <span class="hljs-literal">NULL</span>;				<span class="hljs-comment">//把pa指针置成NULL</span><br> <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,pa);<br></code></pre></td></tr></table></figure>

<p><strong>5、指针使用之前检查有效性</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (pa != <span class="hljs-literal">NULL</span>)&#123;<br>	<span class="hljs-comment">//进行使用</span><br>&#125;<br><br><span class="hljs-keyword">if</span> (pa == <span class="hljs-literal">NULL</span>)&#123;<br>	<span class="hljs-comment">//不进行使用</span><br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="4、二级指针-多重指针"><a href="#4、二级指针-多重指针" class="headerlink" title="4、二级指针(多重指针)"></a>4、二级指针(多重指针)</h2><p>一个指针p1记录一个变量的地址。由于指针p1也是变量，自然也有地址，那么p1变量的地址可以用另一个指针p2来记录。则p2就称为<code>二级指针</code>。</p>
<p>简单来说，二级指针即一个指针变量的值是另外一个指针变量的地址。通俗来说，二级指针就是指向指针的指针。</p>
<p><strong>格式：</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">数据类型 **指针名<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> *pa = &amp;a;  <span class="hljs-comment">//pa是一级指针</span><br><span class="hljs-type">int</span> **ppa = &amp;pa; <span class="hljs-comment">//ppa是二级指针，类型为int **</span><br></code></pre></td></tr></table></figure>

<img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230808183554248.png" srcset="/img/loading.gif" lazyload style="zoom:80%;">
<!--

<img src="第05章_指针(重点)\image-20230808183554248.png" srcset="/img/loading.gif" lazyload style="zoom:80%;" />

<p>–&gt;</p>
<blockquote>
<p>进而推理，会有int ***pppa &#x3D; &ppa; 等情况，但这些情况一般不会遇到。</p>
</blockquote>
<p>在上述代码基础上，</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br>ppa = &amp;b; <span class="hljs-comment">//报错</span><br></code></pre></td></tr></table></figure>

<p>将 ppa（类型为 <code>int **</code>，即二级指针）赋值为 &amp;b，但 &amp;b是一个 <code>int *</code> 类型的指针，而不是 <code>int **</code> 类型。这会导致类型不匹配的错误。</p>
<p>如果您想要将 ppa 指向 b，可以找一个额外的一级指针作为中介。如下操作：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><span class="hljs-type">int</span> *pb = &amp;b;     <span class="hljs-comment">// 使用一级指针来指向b</span><br>ppa = &amp;pb;        <span class="hljs-comment">// 将ppa指向pb的地址，ppa是二级指针</span><br></code></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> var = <span class="hljs-number">3000</span>;<br>    <span class="hljs-type">int</span> *ptr = &amp;var;        <span class="hljs-comment">// 一级指针指向 var</span><br>    <span class="hljs-type">int</span> **pptr = &amp;ptr;      <span class="hljs-comment">// 二级指针指向 ptr</span><br>    <span class="hljs-type">int</span> ***ppptr = &amp;pptr;   <span class="hljs-comment">// 三级指针指向 pptr</span><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Value of var: %d\n&quot;</span>, var);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Value of ptr: %d\n&quot;</span>, *ptr);         <span class="hljs-comment">// 解引用一次</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Value of pptr: %d\n&quot;</span>, **pptr);      <span class="hljs-comment">// 解引用两次</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Value of ppptr: %d\n&quot;</span>, ***ppptr);   <span class="hljs-comment">// 解引用三次</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="image-20230831185356677.png" srcset="/img/loading.gif" lazyload style="zoom: 50%;" />
<!--

<img src="第05章_指针(重点)\image-20230831185356677.png" srcset="/img/loading.gif" lazyload style="zoom: 50%;" />

<p>–&gt;</p>
<p>举例3：使用malloc()函数创建二维数组</p>
<p>malloc()函数用于动态分配堆内存，free()函数用于释放堆内存。这两个函数通常都是配合一起使用的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> rows, cols;<span class="hljs-comment">// 定义二维数组的行和列</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;第一维为：&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;rows);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;第二维为：&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;cols);<br><br>    <span class="hljs-type">int</span> **<span class="hljs-built_in">array</span> = (<span class="hljs-type">int</span> **) <span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span> *) * rows);<span class="hljs-comment">//先创建第一维</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) &#123;<br>        <span class="hljs-comment">//在内层循环中动态创建第二维</span><br>        <span class="hljs-built_in">array</span>[i] = (<span class="hljs-type">int</span> *) <span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>) * cols);<br>        <span class="hljs-comment">//</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; cols; j++) &#123;<br>            <span class="hljs-built_in">array</span>[i][j] = <span class="hljs-number">1</span>;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d　&quot;</span>, <span class="hljs-built_in">array</span>[i][j]);<br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-built_in">free</span>(<span class="hljs-built_in">array</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="5、专题：指针与数组"><a href="#5、专题：指针与数组" class="headerlink" title="5、专题：指针与数组"></a>5、专题：指针与数组</h2><p>复习：</p>
<img src="image-20230809114210755-173816720711844.png" srcset="/img/loading.gif" lazyload style="zoom: 67%;" />
<!--

<img src="第05章_指针(重点)\image-20230809114210755-173816720711844.png" srcset="/img/loading.gif" lazyload style="zoom: 67%;" />

<p>–&gt;</p>
<img src="image-20230901173513831.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" />
<!--

<img src="第05章_指针(重点)\image-20230901173513831.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" />

<p>–&gt;</p>
<ul>
<li>“<code>*</code>“，也称为解引用符号，其<code>作用与&amp;相反</code>。</li>
<li>“<code>*</code>“，后面只能跟指针(即地址)或指针变量，”<code>&amp;</code>“后面跟的是普通变量(包括指针变量)。</li>
</ul>
<h3 id="5-1-一维数组与指针"><a href="#5-1-一维数组与指针" class="headerlink" title="5.1 一维数组与指针"></a>5.1 一维数组与指针</h3><h4 id="5-1-1-指向一维数组的指针变量"><a href="#5-1-1-指向一维数组的指针变量" class="headerlink" title="5.1.1 指向一维数组的指针变量"></a>5.1.1 指向一维数组的指针变量</h4><p>所谓<code>数组元素的指针就是数组元素的地址</code>。可以用一个指针变量指向一个数组元素。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a[<span class="hljs-number">10</span>]=&#123;<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">8</span>,<span class="hljs-number">10</span>,<span class="hljs-number">12</span>,<span class="hljs-number">14</span>,<span class="hljs-number">16</span>,<span class="hljs-number">18</span>,<span class="hljs-number">20</span>&#125;; <br><span class="hljs-type">int</span> *p; <span class="hljs-comment">//定义p为指向整型变量的指针变量</span><br>p = &amp;a[<span class="hljs-number">0</span>]; <span class="hljs-comment">//把a[0]元素的地址赋给指针变量p</span><br></code></pre></td></tr></table></figure>

<p><img src="/image-20230808164241559.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230808164241559.png](第05章_指针(重点)\image-20230808164241559.png)

-->

<p>如下几个写法是等价的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p;<br>p = &amp;a[<span class="hljs-number">0</span>];  <span class="hljs-comment">//千万不要写成*p = &amp;a[0];，那就错了</span><br></code></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p = &amp;a[<span class="hljs-number">0</span>];<br></code></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *p = a; <span class="hljs-comment">//a不代表整个数组，所以这里不是将数组a赋给p。而代表数组元素a[0]的首地址。</span><br></code></pre></td></tr></table></figure>

<p>注意：</p>
<p>因为数组名a保存的是<code>数组首元素a[0]的地址</code>，所以在scanf函数中的输入项如果是数组名，<code>不要再加地址符&amp;</code>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">char</span> arr[<span class="hljs-number">10</span>];<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, arr);  <span class="hljs-comment">//arr前不应加 &amp;</span><br><br>    <span class="hljs-built_in">puts</span>(arr);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5-1-2-使用指针访问数组的元素"><a href="#5-1-2-使用指针访问数组的元素" class="headerlink" title="5.1.2 使用指针访问数组的元素"></a>5.1.2 使用指针访问数组的元素</h4><p>如果指针变量p的初值为<code>&amp;a[0]</code>，则：</p>
<ul>
<li><p><code>p+i</code>和<code>a+i</code>就是数组元素<code>a[i]</code>的地址。或者说，它们指向a数组序号为i的元素。</p>
</li>
<li><p><code>*(p+i)</code>或<code>*(a+i)</code>是<code>p+i</code>或<code>a+i</code>所指向的数组元素的值，即a[i]的值。</p>
</li>
</ul>
<img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230808165619039.png" srcset="/img/loading.gif" lazyload style="zoom:80%;">
<!--

<img src="第05章_指针(重点)\image-20230808165619039.png" srcset="/img/loading.gif" lazyload style="zoom:80%;" />

<p>–&gt;</p>
<p>举例1：数组元素赋值、遍历</p>
<p>方式1：下标法</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> N 5</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a[N];<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入%d个整数：\n&quot;</span>,N);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]); <span class="hljs-comment">//数组元素用数组名和下标表示</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, a[i]);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>方式2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> N 5</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a[N];<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入%d个整数：\n&quot;</span>,N);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]); <span class="hljs-comment">//数组元素用数组名和下标表示</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, *(a + i));<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>方式3：使用指针变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> N 5</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a[N];<br>    <span class="hljs-type">int</span> *p = a;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入%d个整数：\n&quot;</span>, N);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, p + i);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, *(p + i));<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> N 5</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a[N];<br>    <span class="hljs-type">int</span> *p = a;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入%d个整数：\n&quot;</span>, N);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, p + i);<br><br>    <span class="hljs-keyword">for</span> (p = a; p &lt; (a + N); p++)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, *p);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>第(1)和第(2)种方法执行效率是相同的。C编译系统是将a[i]转换为*(a+i)处理的，即先计算元素地址。因此用第(1)和第(2)种方法找数组元素<code>费时较多</code>。</p>
<p>第(3)种方法比第(1)、第(2)种方法快，用指针变量直接指向元素，不必每次都重新计算地址，像p++这样的自加操作是比较快的。这种有规律地改变地址值(p++)能大大<code>提高执行效率</code>。但第(1)方法比较直观，适合初学者。</p>
</blockquote>
<p><strong>思 考：</strong></p>
<p>可以通过改变指针变量p的值指向不同的元素。如果不用p变化的方法而用数组名a变化的方法（例如，用a++）行不行呢？ （不行）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(p = a;a &lt; (p + N);a++)<br>	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,*a);<br></code></pre></td></tr></table></figure>

<p>因为数组名a代表数组的首地址（或数组首元素的地址），它是一个指针型<code>常量</code>，它的值在程序运行期间是固定不变的。所以a++是无法实现的。必须将 a 的地址赋值给指针变量 p ，然后对 p 进行自增。</p>
<p>举例2：获取数组的最大值</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> N 5</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a[N];<br>    <span class="hljs-type">int</span> *p;<br>    p = a;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入%d个数据：\n&quot;</span>, N);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, p + i);<br>    <span class="hljs-comment">//获取最大值</span><br>    <span class="hljs-type">int</span> max = *p;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++)<br>        <span class="hljs-keyword">if</span> (max &lt; *(p + i))<br>            max = *(p + i);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Max: %d\n&quot;</span>, max);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5-1-3-指针带下标的使用"><a href="#5-1-3-指针带下标的使用" class="headerlink" title="5.1.3 指针带下标的使用"></a>5.1.3 指针带下标的使用</h4><p>指向数组元素的指针变量也可以带下标，如<code>p[i]</code>。p[i]被处理成<code>*(p+i)</code>，如果p是指向一个整型数组元素a[0]，则p[i]代表a[i]。但是必须弄清楚p的当前值是什么？<strong>如果当前p指向a[3]，则p[2]并不代表a[2]，而是a[3+2]，即a[5]。</strong></p>
<p>举例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>,<span class="hljs-number">50</span>&#125;;<br>    <span class="hljs-type">int</span> *p = a;<br><br>    <span class="hljs-comment">//遍历数组元素</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++)&#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,p[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-comment">//注意：</span><br>    p++;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,p[<span class="hljs-number">0</span>]); <span class="hljs-comment">//20</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5-1-4-数组名"><a href="#5-1-4-数组名" class="headerlink" title="5.1.4 &amp;数组名"></a>5.1.4 &amp;数组名</h4><p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//复习</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-type">int</span> *p = arr;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>,p);  <span class="hljs-comment">//000000000034fa50</span><br>	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>,&amp;p); <span class="hljs-comment">//000000000037fbd8</span><br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="/image-20230831171558898.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230831171558898.png](第05章_指针(重点)\image-20230831171558898.png)

-->

<p>进一步思考：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, arr);  <span class="hljs-comment">//000000000034fa50</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, &amp;arr); <span class="hljs-comment">//000000000034fa50</span><br></code></pre></td></tr></table></figure>

<p>发现，<code>数组名</code> 和 <code>&amp;数组名</code> 打印的地址是一样的。</p>
<p>举例2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr = %p\n&quot;</span>, arr);        <span class="hljs-comment">//000000cade5ff750</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&amp;arr= %p\n&quot;</span>, &amp;arr);       <span class="hljs-comment">//000000cade5ff750</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr+1 = %p\n&quot;</span>, arr + <span class="hljs-number">1</span>);    <span class="hljs-comment">//000000cade5ff754</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&amp;arr+1= %p\n&quot;</span>, &amp;arr + <span class="hljs-number">1</span>);   <span class="hljs-comment">//000000cade5ff764</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>&amp;arr 理解为<code>数组的地址</code>，而不要理解为数组首元素a[0]的地址。</p>
<p>本例中 &amp;arr 的类型是： int(*)[5] ，是一种数组指针类型。数组的地址+1，跳过整个数组的大小，所以 &amp;arr+1 相对于 &amp;arr 的差值是20。</p>
<blockquote>
<p>【北京航空航天大学2018研】若有以下变量的声明语句：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> i = <span class="hljs-number">1</span>,a[] = &#123;<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>&#125;, *b;<br>b = &amp;i;<br></code></pre></td></tr></table></figure>

<p>则下列选项中，其结果与表达式“*(a＋1)”相等的是（　）。<br>A．a[0]<br>B．*a＋i<br>C．*(a＋b)<br>D．*(a＋*b)</p>
<p>【答案】D</p>
<p>【解析】a指向数组的首元素，因此*(a＋1) 表示取数组第二个元素的值，为2。A项，a[0]＝0，不相等；B项，*a为数组第一个元素的值为0，再加上i＝1，因此结果为1，不相等；C项，a和b都是指针，相加没有意义，错误；D项，*b的值i的值，即1，*(a＋1) 表示取数组第二个元素的值为2，相等，因此答案选D。</p>
</blockquote>
<h3 id="5-2-二维数组与指针"><a href="#5-2-二维数组与指针" class="headerlink" title="5.2 二维数组与指针"></a>5.2 二维数组与指针</h3><h4 id="5-2-1-使用数组名访问"><a href="#5-2-1-使用数组名访问" class="headerlink" title="5.2.1 使用数组名访问"></a>5.2.1 使用数组名访问</h4><p>设有一个二维数组 a 定义为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a[<span class="hljs-number">3</span>][<span class="hljs-number">4</span>] = &#123;&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>,  <span class="hljs-number">4</span>&#125;,<br>               &#123;<span class="hljs-number">5</span>, <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>,  <span class="hljs-number">8</span>&#125;,<br>               &#123;<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>&#125;&#125;;<br></code></pre></td></tr></table></figure>

<p>二维数组 a，可视为三个一维数组：a[0]、a[1]、a[2]；而每个一维数组又是一维数组，分别由 4 个元素组成。首先，理解如下的操作：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,a[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]);  <span class="hljs-comment">//二维数组中元素a[0][0]的值</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>,&amp;a[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]); <span class="hljs-comment">//二维数组中元素a[0][0]的值对应的地址</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>,a[<span class="hljs-number">0</span>]);     <span class="hljs-comment">//二维数组中a[0][0]的地址</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>,a);        <span class="hljs-comment">//二维数组中a[0]的地址</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>,&amp;a);       <span class="hljs-comment">//二维数组a的地址</span><br></code></pre></td></tr></table></figure>

<p>对应图示</p>
<p><img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/1689128732557.png" srcset="/img/loading.gif" lazyload></p>
<!--

![1689128732557.png](第05章_指针(重点)\1689128732557.png)

-->

<p>举例：</p>
<table>
<thead>
<tr>
<th>表示形式</th>
<th>含义</th>
<th>地址</th>
</tr>
</thead>
<tbody><tr>
<td><code>a</code></td>
<td>二维数组名，指向一维数组a[0]，<br>即0行起始地址</td>
<td>2000</td>
</tr>
<tr>
<td><code>&amp;a[0][0],a[0],*a </code></td>
<td>0行0列元素地址</td>
<td>2000</td>
</tr>
<tr>
<td><code>a[0][0],*(a[0]),**a</code></td>
<td>0行0列元素<code>a[0][0]</code>的值</td>
<td>1</td>
</tr>
<tr>
<td><code>&amp;a[1],a+1</code></td>
<td>指向索引为1行的起始地址</td>
<td>2016</td>
</tr>
<tr>
<td><code>&amp;a[1][0],a[1],*(a+1)</code></td>
<td>1行0列元素<code>a[1][0]</code>的地址</td>
<td>2016</td>
</tr>
<tr>
<td><code>a[1][0],*(a[1]),*(*(a+1))</code></td>
<td>1行0列元素<code>a[1][0]</code>的值</td>
<td>5</td>
</tr>
<tr>
<td><code>&amp;a[1][2],a[1]+2,*(a+1)+2</code></td>
<td>1行2列元素<code>a[1][2]</code>的地址</td>
<td>2024</td>
</tr>
<tr>
<td><code>a[1][2],*(a[1]+2),*(*(a+1)+2) </code></td>
<td>1行2列元素<code>a[1][2]</code>的值</td>
<td>是元素值，7</td>
</tr>
</tbody></table>
<p>总结：</p>
<blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&amp;<span class="hljs-selector-tag">a</span>:二维数组a的地址<br><span class="hljs-selector-tag">a</span>: 二维数组中<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span>的地址<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span>:二维数组中<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[0]</span>的地址<br><br>讨论：<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[0]</span>相关的<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[0]</span>的地址：&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[0]</span>,<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span>,*<span class="hljs-selector-tag">a</span>,<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[0]</span>的值： <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[0]</span>,*(<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[0]</span>),**<span class="hljs-selector-tag">a</span>,<br><br>讨论：<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span>相关的<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span>的地址：&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span>,<span class="hljs-selector-tag">a</span> + <span class="hljs-number">1</span><br><br>讨论：<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[0]</span>相关的<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[0]</span>的地址：&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[0]</span>,<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span>,*(a+<span class="hljs-number">1</span>)<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[0]</span>的值：<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[0]</span>,*<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span>,*(*(a+<span class="hljs-number">1</span>))<br><br>讨论：<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span>相关的<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span>的地址：&amp;<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span>,<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span>+<span class="hljs-number">2</span>,*(a+<span class="hljs-number">1</span>)+<span class="hljs-number">2</span><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span>的值：<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span>,*(<span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span>+<span class="hljs-number">2</span>),*(*(a+<span class="hljs-number">1</span>)+<span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>注意：</p>
<p>如果 a 是二维数组，则 a[i]代表一个数组名， a[i]并不占内存单元，也不能存放a 数组元素值。它只是一个地址。所以：a、a+i、a[i]、*(a+i)、*(a+i)+j、a[i]+j 都是地址。</p>
</blockquote>
<p>获取数组元素值的三种表示形式：</p>
<p>1） <code>a[i][j]</code> 下标法</p>
<p>2） <code>*(a[i]+j)</code> 用一维数组名</p>
<p>3） <code>*(*(a+i)+j)</code> 用二维数组名</p>
<h4 id="5-2-2-使用指针变量访问"><a href="#5-2-2-使用指针变量访问" class="headerlink" title="5.2.2 使用指针变量访问"></a>5.2.2 使用指针变量访问</h4><p>设 p 是指针变量，若p 指向数组首元素，即<code>p = a[0];</code>，那<code>a[i][j]</code>的指针如何表示？</p>
<p>先看一个代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a[<span class="hljs-number">3</span>][<span class="hljs-number">2</span>] = &#123;&#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>&#125;,<br>                   &#123;<span class="hljs-number">30</span>, <span class="hljs-number">40</span>&#125;,<br>                   &#123;<span class="hljs-number">50</span>, <span class="hljs-number">60</span>&#125;&#125;;<br><br>    <span class="hljs-type">int</span> *p;<br>    p = &amp;a[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, p);     <span class="hljs-comment">//000000f2f49ff7b0</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, p + <span class="hljs-number">1</span>); <span class="hljs-comment">//000000f2f49ff7b4</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, p + <span class="hljs-number">2</span>); <span class="hljs-comment">//000000f2f49ff7b8</span><br><br>    <span class="hljs-type">int</span> *q;<br>    q = a[<span class="hljs-number">0</span>];<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, q);      <span class="hljs-comment">//000000f2f49ff7b0</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, q + <span class="hljs-number">1</span>);  <span class="hljs-comment">//000000f2f49ff7b4</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, q + <span class="hljs-number">2</span>);  <span class="hljs-comment">//000000f2f49ff7b8</span><br><br>    <span class="hljs-type">int</span> *r;<br>    r = a;  <span class="hljs-comment">//代码片段1</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, r);      <span class="hljs-comment">//000000f2f49ff7b0</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, r + <span class="hljs-number">1</span>);  <span class="hljs-comment">//000000f2f49ff7b4</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%p\n&quot;</span>, r + <span class="hljs-number">2</span>);  <span class="hljs-comment">//000000f2f49ff7b8</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>进而：</p>
<ul>
<li><p>p+j 将指向 a[0] 数组中的元素 <code>a[0][j]</code>。</p>
</li>
<li><p>对于二维数组<code>a[M][N]</code>来讲，由于 a[0]、a[1]、… 、a[M-1]等各行数组在内存中是依次连续存储，则对于 a 数组中的任一元素 <code>a[i][j]</code>：</p>
<ul>
<li>地址表示：<code>p+i*N+j</code></li>
<li>值表示：<code>*(p+i*N+j)</code>、<code>p[i*N+j]</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>注意：上述代码中，代码片段1中的赋值操作会存在类型不匹配的情况，我们在5.6节中展开说明。</p>
</blockquote>
<p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> b[<span class="hljs-number">4</span>][<span class="hljs-number">3</span>] = &#123;&#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>&#125;,<br>               &#123;<span class="hljs-number">40</span>, <span class="hljs-number">50</span>, <span class="hljs-number">60</span>&#125;,<br>               &#123;<span class="hljs-number">70</span>, <span class="hljs-number">80</span>, <span class="hljs-number">90</span>&#125;,<br>               &#123;<span class="hljs-number">100</span>, <span class="hljs-number">110</span>, <span class="hljs-number">120</span>&#125;&#125;;<br><br><span class="hljs-type">int</span> *p = b[<span class="hljs-number">0</span>];<br></code></pre></td></tr></table></figure>

<p>则：元素 <code>b[1][2]</code>对应的地址&#x2F;指针、元素值为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;b[1][2]对应的地址/指针为：%p\n&quot;</span>,p+<span class="hljs-number">1</span>*<span class="hljs-number">3</span>+<span class="hljs-number">2</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;b[1][2]对应的值为：%d\n&quot;</span>,*(p+<span class="hljs-number">1</span>*<span class="hljs-number">3</span>+<span class="hljs-number">2</span>));<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;b[1][2]对应的值为：%d\n&quot;</span>,p[<span class="hljs-number">1</span>*<span class="hljs-number">3</span>+<span class="hljs-number">2</span>]);<br></code></pre></td></tr></table></figure>

<p>举例2：用指针访问二维数组，求二维数组元素的最大值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ROWS 3</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> COLS 4</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a[ROWS][COLS] = &#123;&#123;<span class="hljs-number">10</span>,  <span class="hljs-number">20</span>,  <span class="hljs-number">30</span>,  <span class="hljs-number">40</span>&#125;,<br>                   &#123;<span class="hljs-number">50</span>,  <span class="hljs-number">60</span>,  <span class="hljs-number">70</span>,  <span class="hljs-number">80</span>&#125;,<br>                   &#123;<span class="hljs-number">120</span>, <span class="hljs-number">110</span>, <span class="hljs-number">100</span>, <span class="hljs-number">90</span>&#125;&#125;;<br><br>    <span class="hljs-comment">//方式1：</span><br><span class="hljs-comment">//    int max = a[0][0];</span><br><span class="hljs-comment">//    for (int i = 0; i &lt; ROWS; i++) &#123;</span><br><span class="hljs-comment">//        for (int j = 0; j &lt; COLS; j++) &#123;</span><br><span class="hljs-comment">//            if (max &lt; a[i][j]) &#123;</span><br><span class="hljs-comment">//                max = a[i][j];</span><br><span class="hljs-comment">//            &#125;</span><br><span class="hljs-comment">//        &#125;</span><br><span class="hljs-comment">//    &#125;</span><br><br>    <span class="hljs-comment">//方式2：</span><br>    <span class="hljs-type">int</span> *p = a[<span class="hljs-number">0</span>];<br>    <span class="hljs-type">int</span> max;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; ROWS; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; COLS; j++) &#123;<br>            <span class="hljs-keyword">if</span> (max &lt; *(p + i * COLS + j)) &#123;<br>                max = *(p + i * COLS + j);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;max=%d\n&quot;</span>, max);<br><br>    <span class="hljs-comment">//方式3：</span><br>    <span class="hljs-type">int</span> *q, max1;<br>    <span class="hljs-keyword">for</span> (q = a[<span class="hljs-number">0</span>], max1 = *q; q &lt; a[<span class="hljs-number">0</span>] + ROWS * COLS; q++)<br>        <span class="hljs-keyword">if</span> (max1 &lt; *q)<br>            max1 = *q;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Max=%d\n&quot;</span>, max1);<br><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="5-3-指针数组"><a href="#5-3-指针数组" class="headerlink" title="5.3 指针数组"></a>5.3 指针数组</h3><h4 id="5-3-1-数组指针-vs-指针数组"><a href="#5-3-1-数组指针-vs-指针数组" class="headerlink" title="5.3.1 数组指针 vs 指针数组"></a>5.3.1 数组指针 vs 指针数组</h4><p><strong>数组指针：</strong></p>
<p>当指针变量里存放一个数组的首地址时，此指针变量称为指向数组的指针变量，简称<code>数组指针</code>。</p>
<p>数组指针是指针？还是数组？</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">答案是：指针。<br></code></pre></td></tr></table></figure>

<p>整型指针： int * pint; 能够指向整型数据的指针。</p>
<p>浮点型指针： float * pf; 能够指向浮点型数据的指针。</p>
<p>数组指针：能够指向数组的指针。</p>
<p><strong>指针数组：</strong></p>
<p>数组是用来存放一系列相同类型的数据，当然数组也可以用来存放指针，这种用来<code>存放指针的数组</code>被称为指针数组，它要求存放在数组中指针的<code>数据类型必须一致</code>。</p>
<p>问题：指针数组是指针还是数组？</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">答案：是数组。是存放指针的数组。<br></code></pre></td></tr></table></figure>

<h4 id="5-3-2-指针数组的使用"><a href="#5-3-2-指针数组的使用" class="headerlink" title="5.3.2 指针数组的使用"></a>5.3.2 指针数组的使用</h4><p>格式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">数据类型 *指针数组名[大小];<br></code></pre></td></tr></table></figure>

<p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *arr[<span class="hljs-number">5</span>];<br></code></pre></td></tr></table></figure>

<p>arr是一个数组，有5个元素，每个元素是一个整型指针，需要使用下标来区分。</p>
<img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/UWYO$CLL]RR@E0K@GJYYE0.png" srcset="/img/loading.gif" lazyload style="zoom:80%;">
<!--

<img src="第05章_指针(重点)\UWYO$CLL]RR@E0K@GJYYE0.png" srcset="/img/loading.gif" lazyload style="zoom:80%;" />

<p>–&gt;</p>
<p>举例2：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a, b, c, d, e;<br>    a = <span class="hljs-number">1</span>;<br>    b = <span class="hljs-number">2</span>;<br>    c = <span class="hljs-number">3</span>;<br>    d = <span class="hljs-number">4</span>;<br>    e = <span class="hljs-number">5</span>;<br>    <span class="hljs-type">int</span> *arr[] = &#123;&amp;a, &amp;b, &amp;c, &amp;d, &amp;e&#125;;<span class="hljs-comment">//定义一个int类型的指针数组</span><br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++)&#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,*arr[i]);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>举例3：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> line1[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;         <span class="hljs-comment">//声明数组，矩阵的第一行</span><br>    <span class="hljs-type">int</span> line2[] = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>&#125;;         <span class="hljs-comment">//声明数组，矩阵的第二行</span><br>    <span class="hljs-type">int</span> line3[] = &#123;<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>&#125;;         <span class="hljs-comment">//声明数组，矩阵的第三行</span><br>    <span class="hljs-type">int</span> *p_line[<span class="hljs-number">3</span>];              <span class="hljs-comment">//声明整型指针数组</span><br>    p_line[<span class="hljs-number">0</span>] = line1;           <span class="hljs-comment">//初始化指针数组元素</span><br>    p_line[<span class="hljs-number">1</span>] = line2;<br>    p_line[<span class="hljs-number">2</span>] = line3;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;矩阵:\n&quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;      <span class="hljs-comment">//对指针数组元素循环</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; j++) &#123;    <span class="hljs-comment">//对矩阵每一列循环</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\t&quot;</span>, p_line[i][j]); <span class="hljs-comment">//或改为printf(&quot;%d\t&quot;, *(p_line[i] + j));</span><br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
 <img src="images/image-20230704214810197.png" srcset="/img/loading.gif" lazyload alt="image-20230704214810197" style="zoom:80%;" />

<h3 id="5-4-字符数组-vs-字符指针变量"><a href="#5-4-字符数组-vs-字符指针变量" class="headerlink" title="5.4 字符数组 vs 字符指针变量"></a>5.4 字符数组 vs 字符指针变量</h3><p>一个字符串，可以使用<code>一维字符数组</code>表示，也可以使用<code>字符指针</code>来表示。</p>
<ul>
<li>字符数组由若干个元素组成，每个元素放一个字符</li>
<li>字符指针变量中存放的是地址（字符串&#x2F;字符数组的首地址），绝不是将字符串放到字符指针变量中。</li>
</ul>
<p>举例1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> str[] = <span class="hljs-string">&quot;hello tom&quot;</span>;  <span class="hljs-comment">//使用字符数组</span><br><br><span class="hljs-type">char</span> * pStr = <span class="hljs-string">&quot;hello tom&quot;</span>;  <span class="hljs-comment">//使用字符指针</span><br></code></pre></td></tr></table></figure>

<p>图示：</p>
<p><img src="/image-20230822114353417.png" srcset="/img/loading.gif" lazyload></p>
<!--

![image-20230822114353417.png](第05章_指针(重点)\image-20230822114353417.png)

-->

<p><strong>两种方式的对比：</strong></p>
<p>对已声明好的字符数组，只能一一对各个元素赋值，不能用以下错误方法对字符数组赋值</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> str[<span class="hljs-number">14</span>];<br><br>str[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;i&#x27;</span>; <span class="hljs-comment">//正确</span><br><br>str = <span class="hljs-string">&quot;hello Tom&quot;</span>; <span class="hljs-comment">//错误</span><br></code></pre></td></tr></table></figure>

<p>对字符指针变量，采用如下方式赋值是可以的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> * pStr = <span class="hljs-string">&quot;hel&quot;</span>;<br><br>pStr = <span class="hljs-string">&quot;hello tom&quot;</span>; <span class="hljs-comment">//正确</span><br></code></pre></td></tr></table></figure>

<p>图示：</p>
<img src="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC05%E7%AB%A0_%E6%8C%87%E9%92%88(%E9%87%8D%E7%82%B9)/image-20230902112911828.png" srcset="/img/loading.gif" lazyload style="zoom: 67%;">
<!--

<img src="第05章_指针(重点)\image-20230902112911828.png" srcset="/img/loading.gif" lazyload style="zoom: 67%;" />

<p>–&gt;</p>
<img src="image-20230902112925356.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" />
<!--

<img src="第05章_指针(重点)\image-20230902112925356.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" />

<p>–&gt;</p>
<blockquote>
<p>一个字符数组，因为它有确定的内存地址，所以字符数组名是一个<code>常量</code>。而定义一个字符指针变量时，它在指向某个确定的字符串数据的情况下，也可以多次<code>重新赋值</code>。</p>
</blockquote>
<p>举例2：体会字符串字面量的不可变性</p>
<p>情况1：针对于整型数组、整型指针变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> arr[<span class="hljs-number">10</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>&#125;;<br><br>    <span class="hljs-type">int</span> *p = arr;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, p[<span class="hljs-number">1</span>]); <span class="hljs-comment">//2</span><br><br>    p[<span class="hljs-number">1</span>] = <span class="hljs-number">50</span>;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, p[<span class="hljs-number">1</span>]); <span class="hljs-comment">//50</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, arr[<span class="hljs-number">1</span>]);  <span class="hljs-comment">//50</span><br><br>    <span class="hljs-comment">//</span><br>    <span class="hljs-type">int</span> num = <span class="hljs-number">30</span>;<br>    p = &amp;num;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,*p);    <span class="hljs-comment">//30</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,p[<span class="hljs-number">0</span>]);  <span class="hljs-comment">//30</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>情况2：针对于字符数组、字符指针变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <br>    <span class="hljs-type">char</span> arr[] = <span class="hljs-string">&quot;hello&quot;</span>;<br><br>    arr[<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;m&quot;</span>;    	<span class="hljs-comment">//运行时错误 </span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>,arr);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>因为字符串字面量存储在只读内存区域，是不可变的，不能修改其值。</p>
<p>拓展：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">char</span> *pStr = <span class="hljs-string">&quot;hello&quot;</span>;<br>    pStr = <span class="hljs-string">&quot;hello tom&quot;</span>; <span class="hljs-comment">//正确</span><br><br>    pStr[<span class="hljs-number">1</span>] = <span class="hljs-string">&#x27;m&#x27;</span>;      <span class="hljs-comment">//运行时错误</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>,pStr);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="5-5-字符串数组的表示"><a href="#5-5-字符串数组的表示" class="headerlink" title="5.5 字符串数组的表示"></a>5.5 字符串数组的表示</h3><p>字符串可以使用一维字符数组或字符指针变量等两种方式表示，那么字符串数组如何表示呢？</p>
<p>如果一个数组的每个成员都是一个字符串，则构成了字符串数组。字符串数组有两种表示方式：<code>① 二维字符数组</code> ；<code>②字符指针数组</code>。</p>
<p>举例1：</p>
<p>方式1：使用二维字符数组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> fruit[][<span class="hljs-number">7</span>]=&#123;<span class="hljs-string">&quot;Apple&quot;</span>,<span class="hljs-string">&quot;Orange&quot;</span>,<span class="hljs-string">&quot;Grape&quot;</span>,<span class="hljs-string">&quot;Pear&quot;</span>,<span class="hljs-string">&quot;Peach&quot;</span>&#125;;  <span class="hljs-comment">//上一章5.6节举例4</span><br></code></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> weekdays[<span class="hljs-number">7</span>][<span class="hljs-number">10</span>] = &#123;   <span class="hljs-comment">//行数7也可以省略</span><br>	<span class="hljs-string">&quot;Monday&quot;</span>,<br>	<span class="hljs-string">&quot;Tuesday&quot;</span>,<br>	<span class="hljs-string">&quot;Wednesday&quot;</span>,<br>	<span class="hljs-string">&quot;Thursday&quot;</span>,<br>	<span class="hljs-string">&quot;Friday&quot;</span>,<br>	<span class="hljs-string">&quot;Saturday&quot;</span>,<br>	<span class="hljs-string">&quot;Sunday&quot;</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<p>字符串数组，一共包含7个字符串，所以第一维的长度是7。其中，最长的字符串的长度是10（含结尾的终止符 \0 ），所以第二维的长度统一设为10。</p>
<p><strong>思考：</strong>数组的第二维，长度统一定为10，有点浪费空间，因为大多数成员的长度都小于10。解决方法就是把数组的第二维，从字符数组改成字符指针。</p>
<p>方式2：使用字符指针数组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span>* weekdays[<span class="hljs-number">7</span>] = &#123;  <span class="hljs-comment">//7也可以省略</span><br>  <span class="hljs-string">&quot;Monday&quot;</span>,<br>  <span class="hljs-string">&quot;Tuesday&quot;</span>,<br>  <span class="hljs-string">&quot;Wednesday&quot;</span>,<br>  <span class="hljs-string">&quot;Thursday&quot;</span>,<br>  <span class="hljs-string">&quot;Friday&quot;</span>,<br>  <span class="hljs-string">&quot;Saturday&quot;</span>,<br>  <span class="hljs-string">&quot;Sunday&quot;</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<p>上面的字符串数组，其实是一个一维数组，成员就是7个字符指针，每个指针指向一个字符串（字符数组）。</p>
<p>类似的：定义表示颜色的指针数组 colors，存储“red”、“yellow”、“blue”、“white”、“black” 5 种颜色。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *colors[<span class="hljs-number">5</span>] = &#123;<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;yellow&quot;</span>, <span class="hljs-string">&quot;blue&quot;</span>, <span class="hljs-string">&quot;white&quot;</span>, <span class="hljs-string">&quot;black&quot;</span>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>遍历字符指针数组：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span>; i++) &#123;<br>	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, weekdays[i]);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>举例2：</p>
<p>请编写程序，定义一个字符指针数组，用来存储四大名著的书名， 并通过遍历该指针数组，显示字符串信息 ， (即：定义一个指针数组，该数组的每个元素，指向的是一个字符串)</p>
<p>方式1：二维字符数组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br><br>    <span class="hljs-type">char</span> books[<span class="hljs-number">4</span>][<span class="hljs-number">13</span>] = &#123;<span class="hljs-string">&quot;三国演义&quot;</span>, <span class="hljs-string">&quot;西游记&quot;</span>, <span class="hljs-string">&quot;红楼梦&quot;</span>, <span class="hljs-string">&quot;水浒传&quot;</span>&#125;;<br>    <span class="hljs-type">int</span> len = <span class="hljs-number">4</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; len;i++)&#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;books[%d] : %s\n&quot;</span>,i,books[i]);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>方式2：字符指针数组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">//定义一个指针数组，该数组的每个元素，指向的是一个字符串</span><br>    <span class="hljs-type">char</span> *books[] = &#123;<br>            <span class="hljs-string">&quot;三国演义&quot;</span>,<br>            <span class="hljs-string">&quot;西游记&quot;</span>,<br>            <span class="hljs-string">&quot;红楼梦&quot;</span>,<br>            <span class="hljs-string">&quot;水浒传&quot;</span>,<br>    &#125;;<br><br>    <span class="hljs-comment">//遍历</span><br>    <span class="hljs-type">int</span> len = <span class="hljs-number">4</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;books[%d] : %s\n&quot;</span>, i, books[i]);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="5-6-拓展：指向固定长度数组的指针变量"><a href="#5-6-拓展：指向固定长度数组的指针变量" class="headerlink" title="5.6 拓展：指向固定长度数组的指针变量"></a>5.6 拓展：指向固定长度数组的指针变量</h3><p>定义一个整型指针变量指向一维数组，一维数组的每个元素包含 m 个元素。</p>
<p>定义格式：</p>
<figure class="highlight hy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs hy">(<span class="hljs-name"><span class="hljs-built_in">*</span></span>标识符)[一维数组元素个数]<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>例如：定义一个指针变量 p，它指向包含有 4 个元素的一维数组。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">int (*<span class="hljs-selector-tag">p</span>)<span class="hljs-selector-attr">[4]</span>;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>说明：p先和*结合，说明p是一个指针变量，指向一个大小为4的整型数组。</p>
<p>注意：此时定义的是一个指针变量，并非是一个指针数组。(*p 必须放在括弧内，否则就变成了定义指针数组。)</p>
</blockquote>
<p>由于 p 是指向有 4 个整型元素的一维数组的指针变量，因此，p+1 是将地址值加上 4*4，即指向下一个一维数组。</p>
<p>举例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a[<span class="hljs-number">3</span>][<span class="hljs-number">4</span>] = &#123;&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>,  <span class="hljs-number">4</span>&#125;,<br>               &#123;<span class="hljs-number">5</span>, <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>,  <span class="hljs-number">8</span>&#125;,<br>               &#123;<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>&#125;&#125;;<br><span class="hljs-type">int</span> (*q)[<span class="hljs-number">4</span>];<br>q = a;<br></code></pre></td></tr></table></figure>

<p>则：</p>
<p><code>q</code> 为二维数组第 0 行首地址，与 <code>a</code> 相同；</p>
<p><code>q+1</code> 为二维数组第 1 行首地址，与 <code>a+1</code>相同；</p>
<p><code>q+2</code> 为二维数组第 2 行首地址，与 <code>a+2</code>相同；</p>
<p><code>*(q+i)</code>为二维数组第 i 行第 0 列元素的地址，与<code>*(a+i)</code>相同；</p>
<p><code>*(q+i)+j </code>为二维数组第 i 行第 j 列元素的地址，与<code>*(a+i)+j</code> 相同；</p>
<p><code>*(*(q+i)+j) </code>为二维数组第 i 行第 j 列元素值，与<code>*(*(a+i)+j)</code>相同，即 <code>a[i][j]</code>。</p>
<p>举例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> arr[<span class="hljs-number">3</span>][<span class="hljs-number">4</span>] = &#123;&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>,  <span class="hljs-number">4</span>&#125;,<br>                     &#123;<span class="hljs-number">5</span>, <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>,  <span class="hljs-number">8</span>&#125;,<br>                     &#123;<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>&#125;&#125;;<br>    <span class="hljs-type">int</span> (*q)[<span class="hljs-number">4</span>];<br>    q = arr;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[0]的地址为：%p\n&quot;</span>, arr);            <span class="hljs-comment">//0000006460dffb40</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[0]的地址为：%p\n&quot;</span>, q);              <span class="hljs-comment">//0000006460dffb40</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[0][1]的地址为：%p\n&quot;</span>, *arr + <span class="hljs-number">1</span>);    <span class="hljs-comment">//0000006460dffb44</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[0][1]的地址为：%p\n&quot;</span>, *q + <span class="hljs-number">1</span>);      <span class="hljs-comment">//0000006460dffb44</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[0][1]的地址为：%p\n&quot;</span>, arr[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>);  <span class="hljs-comment">//0000006460dffb44</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[0][1]的地址为：%p\n&quot;</span>, q[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>);    <span class="hljs-comment">//0000006460dffb44</span><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[1]的地址为：%p\n&quot;</span>, arr + <span class="hljs-number">1</span>);       <span class="hljs-comment">//0000006460dffb50</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[1]的地址为：%p\n&quot;</span>, q + <span class="hljs-number">1</span>);         <span class="hljs-comment">//0000006460dffb50</span><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[1][0]的值为：%d\n&quot;</span>, *(*(arr + <span class="hljs-number">1</span>))); <span class="hljs-comment">//5</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[1][0]的值为：%d\n&quot;</span>, *(*(q + <span class="hljs-number">1</span>)));   <span class="hljs-comment">//5</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;arr[1][1]的值为：%d &quot;</span>, *(*(q + <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>));<span class="hljs-comment">//6</span><br><br>    <span class="hljs-comment">//遍历arr[0]中的几个元素</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, *(*q + i)); <span class="hljs-comment">//输出1 2 3 4</span><br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<blockquote>
<p>【华南理工大学2018研】若有以下说明：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">&gt;<span class="hljs-type">int</span> w[<span class="hljs-number">3</span>][<span class="hljs-number">4</span>]=&#123;&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">4</span>&#125;,&#123;<span class="hljs-number">5</span>,<span class="hljs-number">8</span>&#125;&#125;;<br>&gt;<span class="hljs-type">int</span> (*p)[<span class="hljs-number">4</span>]=w;<br></code></pre></td></tr></table></figure>

<p>则数值为4的表达式是（　）。<br>A．*w[1]＋1<br>B．p++，*(p＋1)<br>C．w[2][2]<br>D．p[1][1]</p>
<p>【答案】D</p>
<p>【解析】A中*w[1]表示的是数值2，则表达式的值为3，错误；B中p++表示指向二维数组第二行w[1]的地址，而*(p＋1)代表的是第三行w[2][0]元素的地址，B错误；C中表示的是数值0，答案选D。</p>
</blockquote>
-->
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%8A%80%E6%9C%AF%E6%A0%88/" class="category-chain-item">技术栈</a>
  
  
    <span>></span>
    
  <a href="/categories/%E6%8A%80%E6%9C%AF%E6%A0%88/C/" class="category-chain-item">C</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>5、指针</div>
      <div>http://example.com/2024/04/28/技术栈/C/第05章_指针(重点)/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>pz</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年4月28日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC02%E7%AB%A0_%E5%8F%98%E9%87%8F%E4%B8%8E%E8%BF%9B%E5%88%B6/" title="MySQL高级一">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">MySQL高级一</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/04/28/%E6%8A%80%E6%9C%AF%E6%A0%88/C/%E7%AC%AC07%E7%AB%A0_%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%8E%E5%85%B1%E7%94%A8%E4%BD%93/" title="7、结构体与共用体">
                        <span class="hidden-mobile">7、结构体与共用体</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
